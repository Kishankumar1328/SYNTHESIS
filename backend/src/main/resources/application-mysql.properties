# ========================================
# SynthoGen Platform - MySQL Configuration
# ========================================
# This file contains MySQL-specific configuration
# To use MySQL instead of H2, rename this file to:
# application.properties (or use profile: spring.profiles.active=mysql)
# ========================================

spring.application.name=SynthoGen Enterprise Platform

# ========================================
# MySQL Database Configuration
# ========================================
spring.datasource.url=jdbc:mysql://localhost:3306/synthetic_platform?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&createDatabaseIfNotExist=true
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ========================================
# JPA/Hibernate Configuration for MySQL
# ========================================
# Strategy: update (preserves existing data) or create-drop (fresh start each time)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# ========================================
# Connection Pool (HikariCP) - Optimized for MySQL
# ========================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-test-query=SELECT 1

# MySQL-specific HikariCP settings
spring.datasource.hikari.data-source-properties.cachePrepStmts=true
spring.datasource.hikari.data-source-properties.prepStmtCacheSize=250
spring.datasource.hikari.data-source-properties.prepStmtCacheSqlLimit=2048
spring.datasource.hikari.data-source-properties.useServerPrepStmts=true
spring.datasource.hikari.data-source-properties.useLocalSessionState=true
spring.datasource.hikari.data-source-properties.rewriteBatchedStatements=true
spring.datasource.hikari.data-source-properties.cacheResultSetMetadata=true
spring.datasource.hikari.data-source-properties.cacheServerConfiguration=true
spring.datasource.hikari.data-source-properties.elideSetAutoCommits=true
spring.datasource.hikari.data-source-properties.maintainTimeStats=false

# ========================================
# File Upload Configuration
# ========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB
spring.servlet.multipart.file-size-threshold=2MB
spring.servlet.multipart.location=${java.io.tmpdir}

# ========================================
# Application Configuration
# ========================================
app.storage.location=uploads
app.python.path=python
app.ai.engine.path=../ai-engine

# ========================================
# Server Configuration
# ========================================
server.port=8080
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,text/css,application/javascript
server.compression.min-response-size=1024
server.error.include-message=always
server.error.include-binding-errors=always

# ========================================
# Logging Configuration
# ========================================
logging.level.root=INFO
logging.level.com.synthetic.platform=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/synthogen.log
logging.file.max-size=10MB
logging.file.max-history=30

# ========================================
# Actuator (Production Monitoring)
# ========================================
management.endpoints.web.exposure.include=health,info,metrics,env,beans
management.endpoint.health.show-details=when-authorized
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true

# ========================================
# JWT Configuration
# ========================================
app.jwt.secret=SynthoGenEnterpriseSecretKeyForJWTTokenGenerationMustBe256BitsLongForHS256AlgorithmChangeInProduction
app.jwt.expiration=86400000

# ========================================
# Security Configuration
# ========================================
# CORS allowed origins (update for production)
app.cors.allowed-origins=http://localhost:5173,http://localhost:3000
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# ========================================
# Rate Limiting
# ========================================
app.ratelimit.enabled=true
app.ratelimit.requests-per-minute=100

# ========================================
# Cache Configuration (Optional - Redis)
# ========================================
# Uncomment if using Redis for caching
#spring.cache.type=redis
#spring.data.redis.host=localhost
#spring.data.redis.port=6379
#spring.data.redis.timeout=60000
#spring.data.redis.database=0

# ========================================
# Email Configuration (Optional - for notifications)
# ========================================
# Uncomment and configure for email notifications
#spring.mail.host=smtp.gmail.com
#spring.mail.port=587
#spring.mail.username=your-email@gmail.com
#spring.mail.password=your-app-password
#spring.mail.properties.mail.smtp.auth=true
#spring.mail.properties.mail.smtp.starttls.enable=true

# ========================================
# Privacy & Compliance Settings
# ========================================
app.privacy.min-anonymization-score=95.0
app.privacy.enable-strict-mode=true
app.privacy.zero-leakage-threshold=0.0

# ========================================
# AI Engine Configuration
# ========================================
app.ai.default-algorithm=CTGAN
app.ai.default-epochs=300
app.ai.default-batch-size=500
app.ai.default-embedding-dim=128
app.ai.max-training-time-hours=24
app.ai.enable-gpu=false

# ========================================
# Export Configuration
# ========================================
app.export.max-records=100000
app.export.include-privacy-report=true
app.export.pdf-page-size=A4
app.export.excel-max-rows=1048576

# ========================================
# Data Retention
# ========================================
app.retention.activity-logs-days=90
app.retention.export-files-days=30
app.retention.temp-files-hours=24

# ========================================
# Production Settings (Uncomment for production)
# ========================================
#spring.jpa.show-sql=false
#logging.level.org.hibernate.SQL=INFO
#logging.level.com.synthetic.platform=INFO
#management.endpoints.web.exposure.include=health,info
#server.error.include-message=never
#server.error.include-binding-errors=never
#server.error.include-stacktrace=never
#server.error.include-exception=false

# ========================================
# SSL Configuration (For HTTPS in production)
# ========================================
#server.ssl.enabled=true
#server.ssl.key-store=classpath:keystore.p12
#server.ssl.key-store-password=changeit
#server.ssl.key-store-type=PKCS12
#server.ssl.key-alias=synthogen

# ========================================
# Timezone Configuration
# ========================================
spring.jackson.time-zone=UTC
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss.SSSZ

# ========================================
# END OF CONFIGURATION
# ========================================
